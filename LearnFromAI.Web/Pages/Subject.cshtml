@page "{id:int}"
@model LearnFromAI.Web.Pages.SubjectModel
@{
  ViewData["Title"] = Model.Subject.Headline;
}

<div class="flex flex-col md:flex-row gap-8">
  <aside class="md:w-1/4 bg-white p-4 rounded shadow">
    <partial name="_TableOfContents"
      model="(CourseId: (int?)Model.Subject.CourseId, CurrentSubjectId: (int?)Model.Subject.Id, CurrentExerciseId: (int?)null)" />
  </aside>

  <section class="md:w-3/4 space-y-8">
    <div class="bg-white p-6 rounded shadow">
      <div class="prose prose-sm sm:prose lg:prose-lg xl:prose-xl max-w-none prose-headings:text-primary">
        @Html.Raw(Model.Subject.Content)
      </div>
    </div>

    <div class="bg-white p-6 rounded shadow">
      <h3 class="text-xl font-bold mb-4 text-primary">Exercises</h3>
      <ul class="space-y-2">
        @foreach (var exercise in Model.Subject.Exercises.OrderBy(e => e.Order))
        {
          <li>
            <a href="/Exercise/@exercise.Id" class="text-blue-600 hover:underline">@exercise.Headline</a>
          </li>
        }
      </ul>
    </div>
  </section>
</div>

<div class="mt-8 flex justify-between">
  <button id="prevButton" class="bg-secondary hover:bg-red-600 px-4 py-2 rounded text-white invisible">Previous</button>
  <button id="nextButton" class="bg-secondary hover:bg-red-600 px-4 py-2 rounded text-white invisible">Next</button>
</div>

@section Scripts {
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const prevButton = document.getElementById('prevButton');
      const nextButton = document.getElementById('nextButton');

      // TODO: Add logic to show/hide buttons and set their href attributes based on the current subject's position in the course
    });
  </script>
}
